<div class="card bg-white mwell-card" *ngIf="patient">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h5 class="text-color"><b>{{ patient?.primary_name?.display }}</b></h5>
                <span class="normal-weight mb-0">{{ patient?.age_sex_complete }}<span class="ml-3 mr-3"> | </span>{{ patient?.date_of_birth_string }}</span>
            </div>
            <!-- <h5 class="mr-auto text-color normal-weight ml-3">({{ patient?.patient_id }})</h5> -->
            <button class="btn btn-success btn-lg hidden" (click)="startConsultation()" *ngIf="inprogressAppointment && (videoCall?.currentCall?.state === 'Disconnected' || !videoCall?.currentCall?.state)" [disabled]="!videoCall?.isReady">
                <i class="fas fa-phone-alt mr-2"></i>Start Call
            </button>
        </div>
    </div>
    <div class="card-footer d-flex justify-content-between align-items-start" style="background-color: transparent">
        <h5 class="mr-auto text-color normal-weight">
            <a class="mr-2 cursor-pointer" (click)="allergyModal?.onOpen()">Allergies :</a>
            <span class="text-danger">
                {{ allergies || 'None' }}
            </span>
        </h5>
        <div class="text-right">
            <span class="mr-auto text-color normal-weight">Upcoming Appointment: {{ appointment?.appointment_datetime || 'None'}}</span>
        </div>
    </div>
</div>
<div class="card bg-white" *ngIf="!patient">
    <div class="card-body d-flex justify-content-between align-items-start" *ngIf="!patient">
        <div>
            <p-skeleton borderRadius="5px" height="35px" width="300px"></p-skeleton>
            <div class="d-flex mt-2"><p-skeleton borderRadius="5px" height="35px" width="70px" class="mr-2"></p-skeleton> <p-skeleton height="35px" width="150px"></p-skeleton></div>
        </div>
        <div class="d-flex w-100 pl-3"><p-skeleton borderRadius="5px" height="35px" width="70px"></p-skeleton></div>
        <div class="d-flex justify-content-end w-100 pl-3"><p-skeleton borderRadius="5px" height="50px" borderRadius="20px" width="120px"></p-skeleton></div>
    </div>
    <div class="card-footer d-flex justify-content-between align-items-start" style="background-color: transparent">
        <h5 class="mr-auto text-color normal-weight">&nbsp;</h5>
        <div class="text-right">
            <p-skeleton borderRadius="5px" height="35px" width="300px"></p-skeleton>
        </div>
    </div>
</div>
<app-allergy-modal #allergyModal [patientID]="patient?.patient_id"></app-allergy-modal>